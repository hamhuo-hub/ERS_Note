# 火腿肠ERS管理器

## 项目概述

**火腿肠ERS管理器** 是一个专为考试准备设计的学习管理工具，旨在帮助用户高效规划复习进度、追踪学习效果并优化学习体验。该工具通过 **考试准备得分（ERS，Exam Readiness Score）** 这一创新KPI指标，科学量化用户的学习进度，结合时间管理、知识点跟踪和模拟考试成绩，提供个性化学习支持。

本项目使用 Python 和 PyQt6 开发，具备直观的图形用户界面（GUI），支持阶段管理、知识点记录、复习间隔优化和每日笔记集成。特别适合学生、职业人士或任何需要系统化复习的用户。

---

## 功能特点

1. **阶段化学习管理**：
   - 用户可以创建学习阶段（Stage），如“数学-微积分”或“英语-词汇”，并设置预期耗时、实际耗时和截止日期。
   - 每个阶段支持添加多个知识点（Knowledge Points），并记录信心水平（1-5分）。

2. **考试准备得分（ERS）**：
   - ERS 通过以下公式计算，综合模拟考试成绩和知识点掌握情况：
     \[
     \text{ERS} = (\text{平均模考成绩}) \times (\text{知识点掌握百分比})
     \]
   - 平均模考成绩基于最近3次模拟考试的分数（百分比）。
   - 知识点掌握百分比基于信心水平≥4的知识点比例。
   - ERS 实时更新，并在界面中以百分比形式显示，帮助用户直观了解考试准备进度。

3. **智能复习间隔调整**：
   - 基于实际耗时与预期耗时的比例，动态调整复习间隔（参考间隔重复算法）。
   - 默认间隔为 [1, 2, 4, 7, 15, 30, 60] 天，根据学习效率自动缩短或延长。

4. **知识点管理**：
   - 用户可以为每个阶段添加、删除或更新知识点，并设置信心水平。
   - 信心水平≥4表示知识点已掌握，影响ERS计算。

5. **模拟考试成绩记录**：
   - 用户可以输入模拟考试成绩（0-100%），系统自动计算最近3次的平均分，更新ERS。

6. **每日笔记集成**：
   - 自动生成每日笔记（Markdown格式），记录阶段和知识点信息。
   - 支持阶段名称和知识点的动态更新，保持笔记与学习进度同步。

7. **直观的用户界面**：
   - 采用深色主题，视觉舒适，支持卡片式阶段展示。
   - 每个阶段卡片显示ERS、知识点列表和下次复习日期，颜色编码指示紧急程度（例如，逾期为红色）。

---

## 安装与运行

### 环境要求
- **操作系统**：Windows、macOS 或 Linux
- **Python 版本**：Python 3.8 或以上
- **依赖库**：
  - PyQt6：用于GUI界面
  - 安装命令：
    ```bash
    pip install PyQt6
    ```

### 安装步骤
1. 克隆或下载项目代码：
   ```bash
   git clone <repository-url>
   ```
2. 进入项目目录：
   ```bash
   cd task_notebook
   ```
3. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
   （如果没有 `requirements.txt`，直接运行 `pip install PyQt6`）
4. 运行程序：
   ```bash
   python main.py
   ```

### 配置文件
- **任务数据**：存储在 `~/.task_notebook/tasks.json`
- **设置文件**：存储在 `~/.task_notebook/settings.json`
- **笔记目录**：默认路径为 `C:\Users\HuoZihang\Desktop\笔记\daily_notes`，可通过设置界面修改。

---

## 使用指南

### 1. 创建阶段
- 在主界面输入阶段名称（例如“数学-线性代数”），按回车创建。
- 系统自动生成阶段卡片，并创建对应的每日笔记文件。

### 2. 添加知识点
- 点击阶段卡片，打开详情窗口。
- 在“知识点”部分输入名称，按“添加知识点”按钮或回车。
- 为知识点设置信心水平（1-5），信心水平≥4表示已掌握。

### 3. 记录模拟考试成绩
- 在阶段详情窗口输入模拟考试成绩（百分比），点击“添加模考分数”。
- 系统自动更新ERS并显示最近成绩。

### 4. 记录学习时间
- 设置阶段的预期耗时（小时）。
- 每次复习后输入实际耗时，系统根据耗时比例调整下次复习日期。

### 5. 查看ERS和复习计划
- 阶段卡片显示当前ERS和下次复习日期。
- 颜色编码：
  - 红色：逾期
  - 橙色：当天
  - 青色：3天内
  - 绿色：3天后

### 6. 修改设置
- 点击主界面“设置”按钮，调整任务JSON文件路径或笔记文件夹路径。

---

## 代码结构

```
task_notebook/
├── main.py           # 主程序，包含GUI和核心逻辑
├── tasks.json        # 存储阶段和知识点数据
├── settings.json     # 存储用户设置
├── daily_notes/      # 每日笔记文件夹
│   ├── 2025-06-08.md # 示例笔记文件
└── icon.png          # 程序图标
```

### 主要类
- **TaskNotebook**：主窗口，管理阶段列表和全局设置。
- **StageCard**：阶段卡片，显示阶段名称、ERS、知识点和复习日期。
- **StageDialog**：阶段详情窗口，支持编辑阶段信息、知识点和模考成绩。
- **SettingsDialog**：设置窗口，修改文件路径。

---

## ERS算法详解

**考试准备得分（ERS）** 是本项目的核心KPI，结合了模拟考试表现和知识点掌握程度，公式如下：

\[
\text{ERS} = (\text{平均模考成绩}) \times (\text{知识点掌握百分比})
\]

- **平均模考成绩**：取最近3次模考成绩的平均值（百分比），模拟真实考试环境。
- **知识点掌握百分比**：信心水平≥4的知识点数量除以总知识点数量。
- **示例**：
  - 最近3次模考成绩：80%、85%、90%，平均成绩 = 85%。
  - 总知识点：100个，已掌握（信心≥4）：70个，掌握百分比 = 70%。
  - ERS = 85% × 70% = 59.5%。

**优势**：
- 直接关联考试目标，反映实际准备程度。
- 动态更新，便于追踪学习进步。
- 可指导复习计划，优先解决弱点。

---


## 常见问题

**Q: ERS显示为0或N/A？**
- 检查是否添加了知识点和模考成绩。
- 确保至少一个知识点的信心水平≥4。

**Q: 笔记文件无法写入？**
- 检查笔记文件夹路径是否正确且具有写权限。
- 在设置界面更新路径并保存。

**Q: 如何备份数据？**
- 定期复制 `tasks.json` 和 `daily_notes` 文件夹。
- 未来版本将支持云备份。

---

## 贡献

欢迎提交Issue或Pull Request！请遵循以下步骤：
1. Fork 项目。
2. 创建特性分支（`git checkout -b feature/xxx`）。
3. 提交代码（`git commit -m 'Add xxx feature'`）。
4. 推送分支（`git push origin feature/xxx`）。
5. 创建Pull Request。

---

## 许可证

本项目采用 MIT 许可证。详情见 `LICENSE` 文件。

---

## 联系方式

- 作者：Huo Zihang
- 邮箱：huozihang@outlook.com
- GitHub：https://github.com/hamhuo-hub/ERS_Note